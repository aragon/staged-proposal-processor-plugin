:github-icon: pass:[<svg class="icon"><use href="#github-icon"/></svg>]
:xref-StagedProposalProcessor-initialize-contract-IDAO-address-struct-StagedProposalProcessor-Stage---bytes-struct-IPlugin-TargetConfig-: xref:SPP.adoc#StagedProposalProcessor-initialize-contract-IDAO-address-struct-StagedProposalProcessor-Stage---bytes-struct-IPlugin-TargetConfig-
:xref-StagedProposalProcessor-updateStages-struct-StagedProposalProcessor-Stage---: xref:SPP.adoc#StagedProposalProcessor-updateStages-struct-StagedProposalProcessor-Stage---
:xref-StagedProposalProcessor-reportProposalResult-uint256-uint16-enum-StagedProposalProcessor-ResultType-bool-: xref:SPP.adoc#StagedProposalProcessor-reportProposalResult-uint256-uint16-enum-StagedProposalProcessor-ResultType-bool-
:xref-StagedProposalProcessor-customProposalParamsABI--: xref:SPP.adoc#StagedProposalProcessor-customProposalParamsABI--
:xref-StagedProposalProcessor-supportsInterface-bytes4-: xref:SPP.adoc#StagedProposalProcessor-supportsInterface-bytes4-
:xref-StagedProposalProcessor-setTrustedForwarder-address-: xref:SPP.adoc#StagedProposalProcessor-setTrustedForwarder-address-
:xref-StagedProposalProcessor-createProposal-bytes-struct-Action---uint128-uint64-bytes-----: xref:SPP.adoc#StagedProposalProcessor-createProposal-bytes-struct-Action---uint128-uint64-bytes-----
:xref-StagedProposalProcessor-createProposal-bytes-struct-Action---uint64-uint64-bytes-: xref:SPP.adoc#StagedProposalProcessor-createProposal-bytes-struct-Action---uint64-uint64-bytes-
:xref-StagedProposalProcessor-getTrustedForwarder--: xref:SPP.adoc#StagedProposalProcessor-getTrustedForwarder--
:xref-StagedProposalProcessor-getProposal-uint256-: xref:SPP.adoc#StagedProposalProcessor-getProposal-uint256-
:xref-StagedProposalProcessor-getBodyResult-uint256-uint16-address-: xref:SPP.adoc#StagedProposalProcessor-getBodyResult-uint256-uint16-address-
:xref-StagedProposalProcessor-getBodyProposalId-uint256-uint16-address-: xref:SPP.adoc#StagedProposalProcessor-getBodyProposalId-uint256-uint16-address-
:xref-StagedProposalProcessor-getCurrentConfigIndex--: xref:SPP.adoc#StagedProposalProcessor-getCurrentConfigIndex--
:xref-StagedProposalProcessor-getStages-uint256-: xref:SPP.adoc#StagedProposalProcessor-getStages-uint256-
:xref-StagedProposalProcessor-getCreateProposalParams-uint256-uint16-uint256-: xref:SPP.adoc#StagedProposalProcessor-getCreateProposalParams-uint256-uint16-uint256-
:xref-StagedProposalProcessor-state-uint256-: xref:SPP.adoc#StagedProposalProcessor-state-uint256-
:xref-StagedProposalProcessor-advanceProposal-uint256-: xref:SPP.adoc#StagedProposalProcessor-advanceProposal-uint256-
:xref-StagedProposalProcessor-cancel-uint256-: xref:SPP.adoc#StagedProposalProcessor-cancel-uint256-
:xref-StagedProposalProcessor-edit-uint256-bytes-struct-Action---: xref:SPP.adoc#StagedProposalProcessor-edit-uint256-bytes-struct-Action---
:xref-StagedProposalProcessor-execute-uint256-: xref:SPP.adoc#StagedProposalProcessor-execute-uint256-
:xref-StagedProposalProcessor-canProposalAdvance-uint256-: xref:SPP.adoc#StagedProposalProcessor-canProposalAdvance-uint256-
:xref-StagedProposalProcessor-canExecute-uint256-: xref:SPP.adoc#StagedProposalProcessor-canExecute-uint256-
:xref-StagedProposalProcessor-getProposalTally-uint256-uint16-: xref:SPP.adoc#StagedProposalProcessor-getProposalTally-uint256-uint16-
:xref-StagedProposalProcessor-hasSucceeded-uint256-: xref:SPP.adoc#StagedProposalProcessor-hasSucceeded-uint256-
:xref-StagedProposalProcessor-hasExecutePermission-address-: xref:SPP.adoc#StagedProposalProcessor-hasExecutePermission-address-
:xref-StagedProposalProcessor-hasAdvancePermission-address-: xref:SPP.adoc#StagedProposalProcessor-hasAdvancePermission-address-
:xref-StagedProposalProcessor-_updateStages-struct-StagedProposalProcessor-Stage---: xref:SPP.adoc#StagedProposalProcessor-_updateStages-struct-StagedProposalProcessor-Stage---
:xref-StagedProposalProcessor-_executeProposal-uint256-: xref:SPP.adoc#StagedProposalProcessor-_executeProposal-uint256-
:xref-StagedProposalProcessor-_processProposalResult-uint256-uint16-enum-StagedProposalProcessor-ResultType-: xref:SPP.adoc#StagedProposalProcessor-_processProposalResult-uint256-uint16-enum-StagedProposalProcessor-ResultType-
:xref-StagedProposalProcessor-_createBodyProposals-uint256-uint16-uint64-bytes---: xref:SPP.adoc#StagedProposalProcessor-_createBodyProposals-uint256-uint16-uint64-bytes---
:xref-StagedProposalProcessor-_getProposalTally-uint256-uint16-: xref:SPP.adoc#StagedProposalProcessor-_getProposalTally-uint256-uint16-
:xref-StagedProposalProcessor-_advanceProposal-uint256-: xref:SPP.adoc#StagedProposalProcessor-_advanceProposal-uint256-
:xref-StagedProposalProcessor-_setTrustedForwarder-address-: xref:SPP.adoc#StagedProposalProcessor-_setTrustedForwarder-address-
:xref-StagedProposalProcessor-_msgSender--: xref:SPP.adoc#StagedProposalProcessor-_msgSender--
:xref-StagedProposalProcessor-_encodeStateBitmap-enum-StagedProposalProcessor-ProposalState-: xref:SPP.adoc#StagedProposalProcessor-_encodeStateBitmap-enum-StagedProposalProcessor-ProposalState-
:xref-StagedProposalProcessor-_thresholdsMet-uint256-uint16-uint256-uint256-: xref:SPP.adoc#StagedProposalProcessor-_thresholdsMet-uint256-uint16-uint256-uint256-
:xref-StagedProposalProcessor-ProposalAdvanced-uint256-uint256-: xref:SPP.adoc#StagedProposalProcessor-ProposalAdvanced-uint256-uint256-
:xref-StagedProposalProcessor-ProposalCanceled-uint256-uint256-address-: xref:SPP.adoc#StagedProposalProcessor-ProposalCanceled-uint256-uint256-address-
:xref-StagedProposalProcessor-ProposalEdited-uint256-uint256-address-bytes-struct-Action---: xref:SPP.adoc#StagedProposalProcessor-ProposalEdited-uint256-uint256-address-bytes-struct-Action---
:xref-StagedProposalProcessor-ProposalResultReported-uint256-uint16-address-: xref:SPP.adoc#StagedProposalProcessor-ProposalResultReported-uint256-uint16-address-
:xref-StagedProposalProcessor-SubProposalCreated-uint256-uint16-address-uint256-: xref:SPP.adoc#StagedProposalProcessor-SubProposalCreated-uint256-uint16-address-uint256-
:xref-StagedProposalProcessor-SubProposalNotCreated-uint256-uint16-address-bytes-: xref:SPP.adoc#StagedProposalProcessor-SubProposalNotCreated-uint256-uint16-address-bytes-
:xref-StagedProposalProcessor-StagesUpdated-struct-StagedProposalProcessor-Stage---: xref:SPP.adoc#StagedProposalProcessor-StagesUpdated-struct-StagedProposalProcessor-Stage---
:xref-StagedProposalProcessor-TrustedForwarderUpdated-address-: xref:SPP.adoc#StagedProposalProcessor-TrustedForwarderUpdated-address-
:xref-StagedProposalProcessorSetup-constructor--: xref:SPP.adoc#StagedProposalProcessorSetup-constructor--
:xref-StagedProposalProcessorSetup-prepareInstallation-address-bytes-: xref:SPP.adoc#StagedProposalProcessorSetup-prepareInstallation-address-bytes-
:xref-StagedProposalProcessorSetup-prepareUpdate-address-uint16-struct-IPluginSetup-SetupPayload-: xref:SPP.adoc#StagedProposalProcessorSetup-prepareUpdate-address-uint16-struct-IPluginSetup-SetupPayload-
:xref-StagedProposalProcessorSetup-prepareUninstallation-address-struct-IPluginSetup-SetupPayload-: xref:SPP.adoc#StagedProposalProcessorSetup-prepareUninstallation-address-struct-IPluginSetup-SetupPayload-
:xref-StagedProposalProcessorSetup-CONDITION_IMPLEMENTATION-address: xref:SPP.adoc#StagedProposalProcessorSetup-CONDITION_IMPLEMENTATION-address
:xref-SPPRuleCondition-constructor-address-struct-RuledCondition-Rule---: xref:SPP.adoc#SPPRuleCondition-constructor-address-struct-RuledCondition-Rule---
:xref-SPPRuleCondition-initialize-address-struct-RuledCondition-Rule---: xref:SPP.adoc#SPPRuleCondition-initialize-address-struct-RuledCondition-Rule---
:xref-SPPRuleCondition-isGranted-address-address-bytes32-bytes-: xref:SPP.adoc#SPPRuleCondition-isGranted-address-address-bytes32-bytes-
:xref-SPPRuleCondition-_updateRules-struct-RuledCondition-Rule---: xref:SPP.adoc#SPPRuleCondition-_updateRules-struct-RuledCondition-Rule---
:xref-SPPRuleCondition-updateRules-struct-RuledCondition-Rule---: xref:SPP.adoc#SPPRuleCondition-updateRules-struct-RuledCondition-Rule---
:xref-SPPRuleCondition-UPDATE_RULES_PERMISSION_ID-bytes32: xref:SPP.adoc#SPPRuleCondition-UPDATE_RULES_PERMISSION_ID-bytes32
= StagedProposalProcessor

DANGER: The contracts are currently being audited, DO NOT USE IN PRODUCTION.

:ResultType: pass:normal[xref:#StagedProposalProcessor-ResultType[`++ResultType++`]]
:ProposalState: pass:normal[xref:#StagedProposalProcessor-ProposalState[`++ProposalState++`]]
:Body: pass:normal[xref:#StagedProposalProcessor-Body[`++Body++`]]
:Stage: pass:normal[xref:#StagedProposalProcessor-Stage[`++Stage++`]]
:Proposal: pass:normal[xref:#StagedProposalProcessor-Proposal[`++Proposal++`]]
:ProposalAdvanced: pass:normal[xref:#StagedProposalProcessor-ProposalAdvanced-uint256-uint256-[`++ProposalAdvanced++`]]
:ProposalCanceled: pass:normal[xref:#StagedProposalProcessor-ProposalCanceled-uint256-uint256-address-[`++ProposalCanceled++`]]
:ProposalEdited: pass:normal[xref:#StagedProposalProcessor-ProposalEdited-uint256-uint256-address-bytes-struct-Action---[`++ProposalEdited++`]]
:ProposalResultReported: pass:normal[xref:#StagedProposalProcessor-ProposalResultReported-uint256-uint16-address-[`++ProposalResultReported++`]]
:SubProposalCreated: pass:normal[xref:#StagedProposalProcessor-SubProposalCreated-uint256-uint16-address-uint256-[`++SubProposalCreated++`]]
:SubProposalNotCreated: pass:normal[xref:#StagedProposalProcessor-SubProposalNotCreated-uint256-uint16-address-bytes-[`++SubProposalNotCreated++`]]
:StagesUpdated: pass:normal[xref:#StagedProposalProcessor-StagesUpdated-struct-StagedProposalProcessor-Stage---[`++StagesUpdated++`]]
:TrustedForwarderUpdated: pass:normal[xref:#StagedProposalProcessor-TrustedForwarderUpdated-address-[`++TrustedForwarderUpdated++`]]
:initialize: pass:normal[xref:#StagedProposalProcessor-initialize-contract-IDAO-address-struct-StagedProposalProcessor-Stage---bytes-struct-IPlugin-TargetConfig-[`++initialize++`]]
:updateStages: pass:normal[xref:#StagedProposalProcessor-updateStages-struct-StagedProposalProcessor-Stage---[`++updateStages++`]]
:reportProposalResult: pass:normal[xref:#StagedProposalProcessor-reportProposalResult-uint256-uint16-enum-StagedProposalProcessor-ResultType-bool-[`++reportProposalResult++`]]
:customProposalParamsABI: pass:normal[xref:#StagedProposalProcessor-customProposalParamsABI--[`++customProposalParamsABI++`]]
:supportsInterface: pass:normal[xref:#StagedProposalProcessor-supportsInterface-bytes4-[`++supportsInterface++`]]
:setTrustedForwarder: pass:normal[xref:#StagedProposalProcessor-setTrustedForwarder-address-[`++setTrustedForwarder++`]]
:createProposal: pass:normal[xref:#StagedProposalProcessor-createProposal-bytes-struct-Action---uint128-uint64-bytes-----[`++createProposal++`]]
:createProposal: pass:normal[xref:#StagedProposalProcessor-createProposal-bytes-struct-Action---uint64-uint64-bytes-[`++createProposal++`]]
:getTrustedForwarder: pass:normal[xref:#StagedProposalProcessor-getTrustedForwarder--[`++getTrustedForwarder++`]]
:getProposal: pass:normal[xref:#StagedProposalProcessor-getProposal-uint256-[`++getProposal++`]]
:getBodyResult: pass:normal[xref:#StagedProposalProcessor-getBodyResult-uint256-uint16-address-[`++getBodyResult++`]]
:getBodyProposalId: pass:normal[xref:#StagedProposalProcessor-getBodyProposalId-uint256-uint16-address-[`++getBodyProposalId++`]]
:getCurrentConfigIndex: pass:normal[xref:#StagedProposalProcessor-getCurrentConfigIndex--[`++getCurrentConfigIndex++`]]
:getStages: pass:normal[xref:#StagedProposalProcessor-getStages-uint256-[`++getStages++`]]
:getCreateProposalParams: pass:normal[xref:#StagedProposalProcessor-getCreateProposalParams-uint256-uint16-uint256-[`++getCreateProposalParams++`]]
:state: pass:normal[xref:#StagedProposalProcessor-state-uint256-[`++state++`]]
:advanceProposal: pass:normal[xref:#StagedProposalProcessor-advanceProposal-uint256-[`++advanceProposal++`]]
:cancel: pass:normal[xref:#StagedProposalProcessor-cancel-uint256-[`++cancel++`]]
:edit: pass:normal[xref:#StagedProposalProcessor-edit-uint256-bytes-struct-Action---[`++edit++`]]
:execute: pass:normal[xref:#StagedProposalProcessor-execute-uint256-[`++execute++`]]
:canProposalAdvance: pass:normal[xref:#StagedProposalProcessor-canProposalAdvance-uint256-[`++canProposalAdvance++`]]
:canExecute: pass:normal[xref:#StagedProposalProcessor-canExecute-uint256-[`++canExecute++`]]
:getProposalTally: pass:normal[xref:#StagedProposalProcessor-getProposalTally-uint256-uint16-[`++getProposalTally++`]]
:hasSucceeded: pass:normal[xref:#StagedProposalProcessor-hasSucceeded-uint256-[`++hasSucceeded++`]]
:hasExecutePermission: pass:normal[xref:#StagedProposalProcessor-hasExecutePermission-address-[`++hasExecutePermission++`]]
:hasAdvancePermission: pass:normal[xref:#StagedProposalProcessor-hasAdvancePermission-address-[`++hasAdvancePermission++`]]
:_updateStages: pass:normal[xref:#StagedProposalProcessor-_updateStages-struct-StagedProposalProcessor-Stage---[`++_updateStages++`]]
:_executeProposal: pass:normal[xref:#StagedProposalProcessor-_executeProposal-uint256-[`++_executeProposal++`]]
:_processProposalResult: pass:normal[xref:#StagedProposalProcessor-_processProposalResult-uint256-uint16-enum-StagedProposalProcessor-ResultType-[`++_processProposalResult++`]]
:_createBodyProposals: pass:normal[xref:#StagedProposalProcessor-_createBodyProposals-uint256-uint16-uint64-bytes---[`++_createBodyProposals++`]]
:_getProposalTally: pass:normal[xref:#StagedProposalProcessor-_getProposalTally-uint256-uint16-[`++_getProposalTally++`]]
:_advanceProposal: pass:normal[xref:#StagedProposalProcessor-_advanceProposal-uint256-[`++_advanceProposal++`]]
:_setTrustedForwarder: pass:normal[xref:#StagedProposalProcessor-_setTrustedForwarder-address-[`++_setTrustedForwarder++`]]
:_msgSender: pass:normal[xref:#StagedProposalProcessor-_msgSender--[`++_msgSender++`]]
:_encodeStateBitmap: pass:normal[xref:#StagedProposalProcessor-_encodeStateBitmap-enum-StagedProposalProcessor-ProposalState-[`++_encodeStateBitmap++`]]
:_thresholdsMet: pass:normal[xref:#StagedProposalProcessor-_thresholdsMet-uint256-uint16-uint256-uint256-[`++_thresholdsMet++`]]

[.contract]
[[StagedProposalProcessor]]
=== `++StagedProposalProcessor++` link:/blob/v1.0//Users/giorgilagidze/Desktop/work/multibody/staged-proposal-processor-plugin/src/StagedProposalProcessor.sol[{github-icon},role=heading-link]

[.contract-index]
.Functions
--
* {xref-StagedProposalProcessor-initialize-contract-IDAO-address-struct-StagedProposalProcessor-Stage---bytes-struct-IPlugin-TargetConfig-}[`++initialize(_dao, _trustedForwarder, _stages, _pluginMetadata, _targetConfig)++`]
* {xref-StagedProposalProcessor-updateStages-struct-StagedProposalProcessor-Stage---}[`++updateStages(_stages)++`]
* {xref-StagedProposalProcessor-reportProposalResult-uint256-uint16-enum-StagedProposalProcessor-ResultType-bool-}[`++reportProposalResult(_proposalId, _stageId, _resultType, _tryAdvance)++`]
* {xref-StagedProposalProcessor-customProposalParamsABI--}[`++customProposalParamsABI()++`]
* {xref-StagedProposalProcessor-supportsInterface-bytes4-}[`++supportsInterface(_interfaceId)++`]
* {xref-StagedProposalProcessor-setTrustedForwarder-address-}[`++setTrustedForwarder(_forwarder)++`]
* {xref-StagedProposalProcessor-createProposal-bytes-struct-Action---uint128-uint64-bytes-----}[`++createProposal(_metadata, _actions, _allowFailureMap, _startDate, _proposalParams)++`]
* {xref-StagedProposalProcessor-createProposal-bytes-struct-Action---uint64-uint64-bytes-}[`++createProposal(_metadata, _actions, _startDate, , _data)++`]
* {xref-StagedProposalProcessor-getTrustedForwarder--}[`++getTrustedForwarder()++`]
* {xref-StagedProposalProcessor-getProposal-uint256-}[`++getProposal(_proposalId)++`]
* {xref-StagedProposalProcessor-getBodyResult-uint256-uint16-address-}[`++getBodyResult(_proposalId, _stageId, _body)++`]
* {xref-StagedProposalProcessor-getBodyProposalId-uint256-uint16-address-}[`++getBodyProposalId(_proposalId, _stageId, _body)++`]
* {xref-StagedProposalProcessor-getCurrentConfigIndex--}[`++getCurrentConfigIndex()++`]
* {xref-StagedProposalProcessor-getStages-uint256-}[`++getStages(_index)++`]
* {xref-StagedProposalProcessor-getCreateProposalParams-uint256-uint16-uint256-}[`++getCreateProposalParams(_proposalId, _stageId, _index)++`]
* {xref-StagedProposalProcessor-state-uint256-}[`++state(_proposalId)++`]
* {xref-StagedProposalProcessor-advanceProposal-uint256-}[`++advanceProposal(_proposalId)++`]
* {xref-StagedProposalProcessor-cancel-uint256-}[`++cancel(_proposalId)++`]
* {xref-StagedProposalProcessor-edit-uint256-bytes-struct-Action---}[`++edit(_proposalId, _metadata, _actions)++`]
* {xref-StagedProposalProcessor-execute-uint256-}[`++execute(_proposalId)++`]
* {xref-StagedProposalProcessor-canProposalAdvance-uint256-}[`++canProposalAdvance(_proposalId)++`]
* {xref-StagedProposalProcessor-canExecute-uint256-}[`++canExecute(_proposalId)++`]
* {xref-StagedProposalProcessor-getProposalTally-uint256-uint16-}[`++getProposalTally(_proposalId, _stageId)++`]
* {xref-StagedProposalProcessor-hasSucceeded-uint256-}[`++hasSucceeded(_proposalId)++`]
* {xref-StagedProposalProcessor-hasExecutePermission-address-}[`++hasExecutePermission(_account)++`]
* {xref-StagedProposalProcessor-hasAdvancePermission-address-}[`++hasAdvancePermission(_account)++`]
* {xref-StagedProposalProcessor-_updateStages-struct-StagedProposalProcessor-Stage---}[`++_updateStages(_stages)++`]
* {xref-StagedProposalProcessor-_executeProposal-uint256-}[`++_executeProposal(_proposalId)++`]
* {xref-StagedProposalProcessor-_processProposalResult-uint256-uint16-enum-StagedProposalProcessor-ResultType-}[`++_processProposalResult(_proposalId, _stageId, _resultType)++`]
* {xref-StagedProposalProcessor-_createBodyProposals-uint256-uint16-uint64-bytes---}[`++_createBodyProposals(_proposalId, _stageId, _startDate, _stageProposalParams)++`]
* {xref-StagedProposalProcessor-_getProposalTally-uint256-uint16-}[`++_getProposalTally(_proposalId, _stageId)++`]
* {xref-StagedProposalProcessor-_advanceProposal-uint256-}[`++_advanceProposal(_proposalId)++`]
* {xref-StagedProposalProcessor-_setTrustedForwarder-address-}[`++_setTrustedForwarder(_forwarder)++`]
* {xref-StagedProposalProcessor-_msgSender--}[`++_msgSender()++`]
* {xref-StagedProposalProcessor-_encodeStateBitmap-enum-StagedProposalProcessor-ProposalState-}[`++_encodeStateBitmap(_proposalState)++`]
* {xref-StagedProposalProcessor-_thresholdsMet-uint256-uint16-uint256-uint256-}[`++_thresholdsMet(_proposalId, _stageId, _approvalThreshold, _vetoThreshold)++`]

[.contract-subindex-inherited]
.PluginUUPSUpgradeable
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/plugin/PluginUUPSUpgradeable.sol[pluginType]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/plugin/PluginUUPSUpgradeable.sol[getCurrentTargetConfig]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/plugin/PluginUUPSUpgradeable.sol[getTargetConfig]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/plugin/PluginUUPSUpgradeable.sol[__PluginUUPSUpgradeable_init]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/plugin/PluginUUPSUpgradeable.sol[setTargetConfig]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/plugin/PluginUUPSUpgradeable.sol[implementation]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/plugin/PluginUUPSUpgradeable.sol[_setTargetConfig]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/plugin/PluginUUPSUpgradeable.sol[_execute]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/plugin/PluginUUPSUpgradeable.sol[_execute]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/plugin/PluginUUPSUpgradeable.sol[_authorizeUpgrade]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/plugin/PluginUUPSUpgradeable.sol[SET_TARGET_CONFIG_PERMISSION_ID]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/plugin/PluginUUPSUpgradeable.sol[UPGRADE_PLUGIN_PERMISSION_ID]

[.contract-subindex-inherited]
.ProtocolVersion
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/utils/versioning/ProtocolVersion.sol[protocolVersion]

[.contract-subindex-inherited]
.IProtocolVersion

[.contract-subindex-inherited]
.MetadataExtensionUpgradeable
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/utils/metadata/MetadataExtensionUpgradeable.sol[setMetadata]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/utils/metadata/MetadataExtensionUpgradeable.sol[getMetadata]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/utils/metadata/MetadataExtensionUpgradeable.sol[_setMetadata]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/utils/metadata/MetadataExtensionUpgradeable.sol[SET_METADATA_PERMISSION_ID]

[.contract-subindex-inherited]
.DaoAuthorizableUpgradeable
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/permission/auth/DaoAuthorizableUpgradeable.sol[__DaoAuthorizableUpgradeable_init]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/permission/auth/DaoAuthorizableUpgradeable.sol[dao]

[.contract-subindex-inherited]
.ContextUpgradeable

[.contract-subindex-inherited]
.UUPSUpgradeable

[.contract-subindex-inherited]
.ERC1967UpgradeUpgradeable

[.contract-subindex-inherited]
.IERC1967Upgradeable

[.contract-subindex-inherited]
.IERC1822ProxiableUpgradeable

[.contract-subindex-inherited]
.ProposalUpgradeable
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/plugin/extensions/proposal/ProposalUpgradeable.sol[proposalCount]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/plugin/extensions/proposal/ProposalUpgradeable.sol[_createProposalId]

[.contract-subindex-inherited]
.ERC165Upgradeable

[.contract-subindex-inherited]
.IERC165Upgradeable

[.contract-subindex-inherited]
.Initializable

[.contract-subindex-inherited]
.IPlugin

[.contract-subindex-inherited]
.IProposal

--

[.contract-index]
.Events
--
* {xref-StagedProposalProcessor-ProposalAdvanced-uint256-uint256-}[`++ProposalAdvanced(proposalId, stageId)++`]
* {xref-StagedProposalProcessor-ProposalCanceled-uint256-uint256-address-}[`++ProposalCanceled(proposalId, stageId, sender)++`]
* {xref-StagedProposalProcessor-ProposalEdited-uint256-uint256-address-bytes-struct-Action---}[`++ProposalEdited(proposalId, stageId, sender, metadata, actions)++`]
* {xref-StagedProposalProcessor-ProposalResultReported-uint256-uint16-address-}[`++ProposalResultReported(proposalId, stageId, body)++`]
* {xref-StagedProposalProcessor-SubProposalCreated-uint256-uint16-address-uint256-}[`++SubProposalCreated(proposalId, stageId, body, bodyProposalId)++`]
* {xref-StagedProposalProcessor-SubProposalNotCreated-uint256-uint16-address-bytes-}[`++SubProposalNotCreated(proposalId, stageId, body, reason)++`]
* {xref-StagedProposalProcessor-StagesUpdated-struct-StagedProposalProcessor-Stage---}[`++StagesUpdated(stages)++`]
* {xref-StagedProposalProcessor-TrustedForwarderUpdated-address-}[`++TrustedForwarderUpdated(forwarder)++`]

[.contract-subindex-inherited]
.PluginUUPSUpgradeable
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/plugin/PluginUUPSUpgradeable.sol[TargetSet]

[.contract-subindex-inherited]
.ProtocolVersion

[.contract-subindex-inherited]
.IProtocolVersion

[.contract-subindex-inherited]
.MetadataExtensionUpgradeable
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/utils/metadata/MetadataExtensionUpgradeable.sol[MetadataSet]

[.contract-subindex-inherited]
.DaoAuthorizableUpgradeable

[.contract-subindex-inherited]
.ContextUpgradeable

[.contract-subindex-inherited]
.UUPSUpgradeable

[.contract-subindex-inherited]
.ERC1967UpgradeUpgradeable

[.contract-subindex-inherited]
.IERC1967Upgradeable

[.contract-subindex-inherited]
.IERC1822ProxiableUpgradeable

[.contract-subindex-inherited]
.ProposalUpgradeable

[.contract-subindex-inherited]
.ERC165Upgradeable

[.contract-subindex-inherited]
.IERC165Upgradeable

[.contract-subindex-inherited]
.Initializable

[.contract-subindex-inherited]
.IPlugin

[.contract-subindex-inherited]
.IProposal
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/plugin/extensions/proposal/IProposal.sol[ProposalCreated]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/plugin/extensions/proposal/IProposal.sol[ProposalExecuted]

--

[.contract-index]
.Errors
--

[.contract-subindex-inherited]
.PluginUUPSUpgradeable
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/plugin/PluginUUPSUpgradeable.sol[InvalidTargetConfig]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/plugin/PluginUUPSUpgradeable.sol[DelegateCallFailed]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/plugin/PluginUUPSUpgradeable.sol[AlreadyInitialized]

[.contract-subindex-inherited]
.ProtocolVersion

[.contract-subindex-inherited]
.IProtocolVersion

[.contract-subindex-inherited]
.MetadataExtensionUpgradeable

[.contract-subindex-inherited]
.DaoAuthorizableUpgradeable

[.contract-subindex-inherited]
.ContextUpgradeable

[.contract-subindex-inherited]
.UUPSUpgradeable

[.contract-subindex-inherited]
.ERC1967UpgradeUpgradeable

[.contract-subindex-inherited]
.IERC1967Upgradeable

[.contract-subindex-inherited]
.IERC1822ProxiableUpgradeable

[.contract-subindex-inherited]
.ProposalUpgradeable
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/plugin/extensions/proposal/ProposalUpgradeable.sol[FunctionDeprecated]

[.contract-subindex-inherited]
.ERC165Upgradeable

[.contract-subindex-inherited]
.IERC165Upgradeable

[.contract-subindex-inherited]
.Initializable

[.contract-subindex-inherited]
.IPlugin

[.contract-subindex-inherited]
.IProposal

--

[.contract-item]
[[StagedProposalProcessor-initialize-contract-IDAO-address-struct-StagedProposalProcessor-Stage---bytes-struct-IPlugin-TargetConfig-]]
==== `[.contract-item-name]#++initialize++#++(contract IDAO _dao, address _trustedForwarder, struct StagedProposalProcessor.Stage[] _stages, bytes _pluginMetadata, struct IPlugin.TargetConfig _targetConfig)++` [.item-kind]#external#

Initializes the component.

This method is required to support [ERC-1822](https://eips.ethereum.org/EIPS/eip-1822).

[.contract-item]
[[StagedProposalProcessor-updateStages-struct-StagedProposalProcessor-Stage---]]
==== `[.contract-item-name]#++updateStages++#++(struct StagedProposalProcessor.Stage[] _stages)++` [.item-kind]#external#

Allows to update stage configuration.

Requires the caller to have the &#x60;UPDATE_STAGES_PERMISSION_ID&#x60; permission.
     Reverts if the provided &#x60;_stages&#x60; array is empty.

[.contract-item]
[[StagedProposalProcessor-reportProposalResult-uint256-uint16-enum-StagedProposalProcessor-ResultType-bool-]]
==== `[.contract-item-name]#++reportProposalResult++#++(uint256 _proposalId, uint16 _stageId, enum StagedProposalProcessor.ResultType _resultType, bool _tryAdvance)++` [.item-kind]#external#

Reports and records the result for a proposal at a specific stage.

This function can be called by any address even if it is not included in the stage configuration.
     &#x60;_canProposalAdvance&#x60; function ensures that only records from addresses
     in the stage configuration are used.
     If &#x60;_tryAdvance&#x60; is true, the proposal will attempt to advance to the next stage if eligible.
     Requires the caller to have the &#x60;EXECUTE_PERMISSION_ID&#x60; permission to execute the final stage.

[.contract-item]
[[StagedProposalProcessor-customProposalParamsABI--]]
==== `[.contract-item-name]#++customProposalParamsABI++#++() → string++` [.item-kind]#external#

The human-readable abi format for extra params included in &#x60;data&#x60; of &#x60;createProposal&#x60;.

This plugin inherits from &#x60;IProposal&#x60;, requiring an override for this function.

[.contract-item]
[[StagedProposalProcessor-supportsInterface-bytes4-]]
==== `[.contract-item-name]#++supportsInterface++#++(bytes4 _interfaceId) → bool++` [.item-kind]#public#

Checks if this or the parent contract supports an interface by its ID.

[.contract-item]
[[StagedProposalProcessor-setTrustedForwarder-address-]]
==== `[.contract-item-name]#++setTrustedForwarder++#++(address _forwarder)++` [.item-kind]#public#

Sets a new trusted forwarder address.

Requires the caller to have the &#x60;SET_TRUSTED_FORWARDER_PERMISSION_ID&#x60; permission.

[.contract-item]
[[StagedProposalProcessor-createProposal-bytes-struct-Action---uint128-uint64-bytes-----]]
==== `[.contract-item-name]#++createProposal++#++(bytes _metadata, struct Action[] _actions, uint128 _allowFailureMap, uint64 _startDate, bytes[][] _proposalParams) → uint256 proposalId++` [.item-kind]#public#

Creates a new proposal in this &#x60;StagedProposalProcessor&#x60; plugin.

Requires the caller to have the &#x60;CREATE_PROPOSAL_PERMISSION_ID&#x60; permission.
     Also creates proposals for non-manual bodies in the first stage of the proposal process.

[.contract-item]
[[StagedProposalProcessor-createProposal-bytes-struct-Action---uint64-uint64-bytes-]]
==== `[.contract-item-name]#++createProposal++#++(bytes _metadata, struct Action[] _actions, uint64 _startDate, uint64, bytes _data) → uint256 proposalId++` [.item-kind]#public#

Creates a new proposal.

Calls a public function that requires the &#x60;CREATE_PERMISSION_ID&#x60; permission.

[.contract-item]
[[StagedProposalProcessor-getTrustedForwarder--]]
==== `[.contract-item-name]#++getTrustedForwarder++#++() → address++` [.item-kind]#public#

Retrieves the address of the trusted forwarder.

[.contract-item]
[[StagedProposalProcessor-getProposal-uint256-]]
==== `[.contract-item-name]#++getProposal++#++(uint256 _proposalId) → struct StagedProposalProcessor.Proposal++` [.item-kind]#public#

Retrieves all information associated with a proposal by its ID.

[.contract-item]
[[StagedProposalProcessor-getBodyResult-uint256-uint16-address-]]
==== `[.contract-item-name]#++getBodyResult++#++(uint256 _proposalId, uint16 _stageId, address _body) → enum StagedProposalProcessor.ResultType++` [.item-kind]#public#

Retrieves the result type submitted by a body for a specific proposal and stage.

[.contract-item]
[[StagedProposalProcessor-getBodyProposalId-uint256-uint16-address-]]
==== `[.contract-item-name]#++getBodyProposalId++#++(uint256 _proposalId, uint16 _stageId, address _body) → uint256++` [.item-kind]#public#

Retrieves the sub proposal id.

[.contract-item]
[[StagedProposalProcessor-getCurrentConfigIndex--]]
==== `[.contract-item-name]#++getCurrentConfigIndex++#++() → uint16++` [.item-kind]#public#

Retrieves the current configuration index at which the current configurations of stages are stored.

[.contract-item]
[[StagedProposalProcessor-getStages-uint256-]]
==== `[.contract-item-name]#++getStages++#++(uint256 _index) → struct StagedProposalProcessor.Stage[]++` [.item-kind]#public#

Retrieves the stages stored on the &#x60;_index&#x60; in the &#x60;stages&#x60; configuration.

[.contract-item]
[[StagedProposalProcessor-getCreateProposalParams-uint256-uint16-uint256-]]
==== `[.contract-item-name]#++getCreateProposalParams++#++(uint256 _proposalId, uint16 _stageId, uint256 _index) → bytes++` [.item-kind]#public#

Retrieves the &#x60;data&#x60; parameter encoded for a sub-body&#x27;s &#x60;createProposal&#x60; function in a specific stage.
        Excludes sub-bodies from the first stage, as their parameters are not stored for efficiency.

[.contract-item]
[[StagedProposalProcessor-state-uint256-]]
==== `[.contract-item-name]#++state++#++(uint256 _proposalId) → enum StagedProposalProcessor.ProposalState++` [.item-kind]#public#

Current state of a proposal.

[.contract-item]
[[StagedProposalProcessor-advanceProposal-uint256-]]
==== `[.contract-item-name]#++advanceProposal++#++(uint256 _proposalId)++` [.item-kind]#public#

Advances the specified proposal to the next stage if allowed.

This function checks whether the proposal exists and can advance based on its current state.
     If the proposal is in the final stage, the caller must have the
     &#x60;EXECUTE_PERMISSION_ID&#x60; permission to execute it.

[.contract-item]
[[StagedProposalProcessor-cancel-uint256-]]
==== `[.contract-item-name]#++cancel++#++(uint256 _proposalId)++` [.item-kind]#public#

Cancels the proposal.

The proposal can be canceled only if it&#x27;s allowed in the stage configuration.
     The caller must have the &#x60;CANCEL_PERMISSION_ID&#x60; permission to cancel it.

[.contract-item]
[[StagedProposalProcessor-edit-uint256-bytes-struct-Action---]]
==== `[.contract-item-name]#++edit++#++(uint256 _proposalId, bytes _metadata, struct Action[] _actions)++` [.item-kind]#public#

Edits the proposal.

The proposal can be editable only if it&#x27;s allowed in the stage configuration.
     The caller must have the &#x60;EDIT_PERMISSION_ID&#x60; permission to cancel it
     and stage must be advanceable.

[.contract-item]
[[StagedProposalProcessor-execute-uint256-]]
==== `[.contract-item-name]#++execute++#++(uint256 _proposalId)++` [.item-kind]#public#

Executes a proposal.

Requires the &#x60;EXECUTE_PERMISSION_ID&#x60; permission.

[.contract-item]
[[StagedProposalProcessor-canProposalAdvance-uint256-]]
==== `[.contract-item-name]#++canProposalAdvance++#++(uint256 _proposalId) → bool++` [.item-kind]#public#

Determines whether the specified proposal can be advanced to the next stage.

Reverts if the proposal with the given &#x60;_proposalId&#x60; does not exist.

[.contract-item]
[[StagedProposalProcessor-canExecute-uint256-]]
==== `[.contract-item-name]#++canExecute++#++(uint256 _proposalId) → bool++` [.item-kind]#public#

Checks if a proposal can be executed.

[.contract-item]
[[StagedProposalProcessor-getProposalTally-uint256-uint16-]]
==== `[.contract-item-name]#++getProposalTally++#++(uint256 _proposalId, uint16 _stageId) → uint256 approvals, uint256 vetoes++` [.item-kind]#public#

Calculates and retrieves the number of approvals and vetoes for a proposal.

[.contract-item]
[[StagedProposalProcessor-hasSucceeded-uint256-]]
==== `[.contract-item-name]#++hasSucceeded++#++(uint256 _proposalId) → bool++` [.item-kind]#public#

Whether proposal succeeded or not.

Note that this must not include time window checks and only make a decision based on the thresholds.

[.contract-item]
[[StagedProposalProcessor-hasExecutePermission-address-]]
==== `[.contract-item-name]#++hasExecutePermission++#++(address _account) → bool++` [.item-kind]#public#

Checks whether the caller has the required permission to execute a proposal at the last stage.

[.contract-item]
[[StagedProposalProcessor-hasAdvancePermission-address-]]
==== `[.contract-item-name]#++hasAdvancePermission++#++(address _account) → bool++` [.item-kind]#public#

Checks whether the caller has the required permission to advance a proposal.

[.contract-item]
[[StagedProposalProcessor-_updateStages-struct-StagedProposalProcessor-Stage---]]
==== `[.contract-item-name]#++_updateStages++#++(struct StagedProposalProcessor.Stage[] _stages)++` [.item-kind]#internal#

Internal function to update stage configuration.

It&#x27;s a caller&#x27;s responsibility not to call this in case &#x60;_stages&#x60; are empty.
     This function can not be overridden as it&#x27;s crucial to not allow duplicating bodies
     in the same stage, because proposal creation and report functions depend on this assumption.

[.contract-item]
[[StagedProposalProcessor-_executeProposal-uint256-]]
==== `[.contract-item-name]#++_executeProposal++#++(uint256 _proposalId)++` [.item-kind]#internal#

Internal function that executes the proposal&#x27;s actions.

[.contract-item]
[[StagedProposalProcessor-_processProposalResult-uint256-uint16-enum-StagedProposalProcessor-ResultType-]]
==== `[.contract-item-name]#++_processProposalResult++#++(uint256 _proposalId, uint16 _stageId, enum StagedProposalProcessor.ResultType _resultType)++` [.item-kind]#internal#

Records the result by the caller.

Assumes that bodies are not duplicated in the same stage. See &#x60;_updateStages&#x60; function.

[.contract-item]
[[StagedProposalProcessor-_createBodyProposals-uint256-uint16-uint64-bytes---]]
==== `[.contract-item-name]#++_createBodyProposals++#++(uint256 _proposalId, uint16 _stageId, uint64 _startDate, bytes[] _stageProposalParams)++` [.item-kind]#internal#

Creates proposals on the non-manual bodies of the &#x60;stageId&#x60;.

Assumes that bodies are not duplicated in the same stage. See &#x60;_updateStages&#x60; function.

[.contract-item]
[[StagedProposalProcessor-_getProposalTally-uint256-uint16-]]
==== `[.contract-item-name]#++_getProposalTally++#++(uint256 _proposalId, uint16 _stageId) → uint256 approvals, uint256 vetoes++` [.item-kind]#internal#

Internal function to calculate and retrieve the number of approvals and
        vetoes for a proposal in the &#x60;_stageId&#x60;.

Assumes that bodies are not duplicated in the same stage. See &#x60;_updateStages&#x60; function.
     This function ensures that only records from addresses in the stage configuration are used.

[.contract-item]
[[StagedProposalProcessor-_advanceProposal-uint256-]]
==== `[.contract-item-name]#++_advanceProposal++#++(uint256 _proposalId)++` [.item-kind]#internal#

Advances a proposal to the next stage or executes it if it is in the final stage.

Assumes the proposal is eligible to advance. If the proposal is not in the final stage,
     it creates proposals for the sub-bodies in the next stage.
     If the proposal is in the final stage, it triggers execution.

[.contract-item]
[[StagedProposalProcessor-_setTrustedForwarder-address-]]
==== `[.contract-item-name]#++_setTrustedForwarder++#++(address _forwarder)++` [.item-kind]#internal#

Sets a new trusted forwarder address and emits the event.

[.contract-item]
[[StagedProposalProcessor-_msgSender--]]
==== `[.contract-item-name]#++_msgSender++#++() → address++` [.item-kind]#internal#

Retrieves the original sender address, considering if the call was made through a trusted forwarder.

If the &#x60;msg.sender&#x60; is the trusted forwarder, extracts the original sender from the calldata.

[.contract-item]
[[StagedProposalProcessor-_encodeStateBitmap-enum-StagedProposalProcessor-ProposalState-]]
==== `[.contract-item-name]#++_encodeStateBitmap++#++(enum StagedProposalProcessor.ProposalState _proposalState) → bytes32++` [.item-kind]#internal#

Encodes a &#x60;ProposalState&#x60; into a &#x60;bytes32&#x60; representation where each bit enabled
        corresponds the underlying position in the &#x60;ProposalState&#x60; enum.

[.contract-item]
[[StagedProposalProcessor-_thresholdsMet-uint256-uint16-uint256-uint256-]]
==== `[.contract-item-name]#++_thresholdsMet++#++(uint256 _proposalId, uint16 _stageId, uint256 _approvalThreshold, uint256 _vetoThreshold) → bool++` [.item-kind]#internal#

Internal helper function that decides if the stage&#x27;s thresholds are satisfied.

[.contract-item]
[[StagedProposalProcessor-ProposalAdvanced-uint256-uint256-]]
==== `[.contract-item-name]#++ProposalAdvanced++#++(uint256 indexed proposalId, uint256 indexed stageId)++` [.item-kind]#event#

Emitted when the proposal is advanced to the next stage.

[.contract-item]
[[StagedProposalProcessor-ProposalCanceled-uint256-uint256-address-]]
==== `[.contract-item-name]#++ProposalCanceled++#++(uint256 indexed proposalId, uint256 indexed stageId, address indexed sender)++` [.item-kind]#event#

Emitted when the proposal gets cancelled.

[.contract-item]
[[StagedProposalProcessor-ProposalEdited-uint256-uint256-address-bytes-struct-Action---]]
==== `[.contract-item-name]#++ProposalEdited++#++(uint256 indexed proposalId, uint256 indexed stageId, address indexed sender, bytes metadata, struct Action[] actions)++` [.item-kind]#event#

Emitted when the proposal gets editted.

[.contract-item]
[[StagedProposalProcessor-ProposalResultReported-uint256-uint16-address-]]
==== `[.contract-item-name]#++ProposalResultReported++#++(uint256 indexed proposalId, uint16 indexed stageId, address indexed body)++` [.item-kind]#event#

Emitted when a body reports results by calling &#x60;reportProposalResult&#x60;.

[.contract-item]
[[StagedProposalProcessor-SubProposalCreated-uint256-uint16-address-uint256-]]
==== `[.contract-item-name]#++SubProposalCreated++#++(uint256 indexed proposalId, uint16 indexed stageId, address indexed body, uint256 bodyProposalId)++` [.item-kind]#event#

Emitted when this plugin successfully creates a proposal on sub-body.

[.contract-item]
[[StagedProposalProcessor-SubProposalNotCreated-uint256-uint16-address-bytes-]]
==== `[.contract-item-name]#++SubProposalNotCreated++#++(uint256 indexed proposalId, uint16 indexed stageId, address indexed body, bytes reason)++` [.item-kind]#event#

Emitted when this plugin fails in creating a proposal on sub-body.

[.contract-item]
[[StagedProposalProcessor-StagesUpdated-struct-StagedProposalProcessor-Stage---]]
==== `[.contract-item-name]#++StagesUpdated++#++(struct StagedProposalProcessor.Stage[] stages)++` [.item-kind]#event#

Emitted when the stage configuration is updated for a proposal process.

[.contract-item]
[[StagedProposalProcessor-TrustedForwarderUpdated-address-]]
==== `[.contract-item-name]#++TrustedForwarderUpdated++#++(address indexed forwarder)++` [.item-kind]#event#

Emitted when the trusted forwarder is updated.

:CONDITION_IMPLEMENTATION: pass:normal[xref:#StagedProposalProcessorSetup-CONDITION_IMPLEMENTATION-address[`++CONDITION_IMPLEMENTATION++`]]
:constructor: pass:normal[xref:#StagedProposalProcessorSetup-constructor--[`++constructor++`]]
:prepareInstallation: pass:normal[xref:#StagedProposalProcessorSetup-prepareInstallation-address-bytes-[`++prepareInstallation++`]]
:prepareUpdate: pass:normal[xref:#StagedProposalProcessorSetup-prepareUpdate-address-uint16-struct-IPluginSetup-SetupPayload-[`++prepareUpdate++`]]
:prepareUninstallation: pass:normal[xref:#StagedProposalProcessorSetup-prepareUninstallation-address-struct-IPluginSetup-SetupPayload-[`++prepareUninstallation++`]]

[.contract]
[[StagedProposalProcessorSetup]]
=== `++StagedProposalProcessorSetup++` link:/blob/v1.0//Users/giorgilagidze/Desktop/work/multibody/staged-proposal-processor-plugin/src/StagedProposalProcessorSetup.sol[{github-icon},role=heading-link]

Release 1, Build 1

[.contract-index]
.Functions
--
* {xref-StagedProposalProcessorSetup-constructor--}[`++constructor()++`]
* {xref-StagedProposalProcessorSetup-prepareInstallation-address-bytes-}[`++prepareInstallation(_dao, _installationParams)++`]
* {xref-StagedProposalProcessorSetup-prepareUpdate-address-uint16-struct-IPluginSetup-SetupPayload-}[`++prepareUpdate(_dao, _fromBuild, _payload)++`]
* {xref-StagedProposalProcessorSetup-prepareUninstallation-address-struct-IPluginSetup-SetupPayload-}[`++prepareUninstallation(_dao, _payload)++`]
* {xref-StagedProposalProcessorSetup-CONDITION_IMPLEMENTATION-address}[`++CONDITION_IMPLEMENTATION()++`]

[.contract-subindex-inherited]
.PluginUpgradeableSetup
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/plugin/setup/PluginUpgradeableSetup.sol[supportsInterface]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/plugin/setup/PluginUpgradeableSetup.sol[implementation]

[.contract-subindex-inherited]
.ProtocolVersion
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/utils/versioning/ProtocolVersion.sol[protocolVersion]

[.contract-subindex-inherited]
.IProtocolVersion

[.contract-subindex-inherited]
.IPluginSetup

[.contract-subindex-inherited]
.ERC165

[.contract-subindex-inherited]
.IERC165

--

[.contract-index]
.Errors
--

[.contract-subindex-inherited]
.PluginUpgradeableSetup
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/plugin/setup/PluginUpgradeableSetup.sol[InvalidUpdatePath]

[.contract-subindex-inherited]
.ProtocolVersion

[.contract-subindex-inherited]
.IProtocolVersion

[.contract-subindex-inherited]
.IPluginSetup

[.contract-subindex-inherited]
.ERC165

[.contract-subindex-inherited]
.IERC165

--

[.contract-item]
[[StagedProposalProcessorSetup-constructor--]]
==== `[.contract-item-name]#++constructor++#++()++` [.item-kind]#public#

Constructs the &#x60;PluginUpgradeableSetup&#x60; by storing the &#x60;SPP&#x60; implementation address.

The implementation address is used to deploy UUPS proxies referencing it and
to verify the plugin on the respective block explorers.

[.contract-item]
[[StagedProposalProcessorSetup-prepareInstallation-address-bytes-]]
==== `[.contract-item-name]#++prepareInstallation++#++(address _dao, bytes _installationParams) → address spp, struct IPluginSetup.PreparedSetupData preparedSetupData++` [.item-kind]#external#

Prepares the installation of a plugin.

[.contract-item]
[[StagedProposalProcessorSetup-prepareUpdate-address-uint16-struct-IPluginSetup-SetupPayload-]]
==== `[.contract-item-name]#++prepareUpdate++#++(address _dao, uint16 _fromBuild, struct IPluginSetup.SetupPayload _payload) → bytes, struct IPluginSetup.PreparedSetupData++` [.item-kind]#external#

Prepares the update of a plugin.

The default implementation for the initial build 1 that reverts because no earlier build exists.

[.contract-item]
[[StagedProposalProcessorSetup-prepareUninstallation-address-struct-IPluginSetup-SetupPayload-]]
==== `[.contract-item-name]#++prepareUninstallation++#++(address _dao, struct IPluginSetup.SetupPayload _payload) → struct PermissionLib.MultiTargetPermission[] permissions++` [.item-kind]#external#

Prepares the uninstallation of a plugin.

[.contract-item]
[[StagedProposalProcessorSetup-CONDITION_IMPLEMENTATION-address]]
==== `[.contract-item-name]#++CONDITION_IMPLEMENTATION++#++() → address++` [.item-kind]#public#

The address of the condition implementation contract.

:UPDATE_RULES_PERMISSION_ID: pass:normal[xref:#SPPRuleCondition-UPDATE_RULES_PERMISSION_ID-bytes32[`++UPDATE_RULES_PERMISSION_ID++`]]
:constructor: pass:normal[xref:#SPPRuleCondition-constructor-address-struct-RuledCondition-Rule---[`++constructor++`]]
:initialize: pass:normal[xref:#SPPRuleCondition-initialize-address-struct-RuledCondition-Rule---[`++initialize++`]]
:isGranted: pass:normal[xref:#SPPRuleCondition-isGranted-address-address-bytes32-bytes-[`++isGranted++`]]
:_updateRules: pass:normal[xref:#SPPRuleCondition-_updateRules-struct-RuledCondition-Rule---[`++_updateRules++`]]
:updateRules: pass:normal[xref:#SPPRuleCondition-updateRules-struct-RuledCondition-Rule---[`++updateRules++`]]

[.contract]
[[SPPRuleCondition]]
=== `++SPPRuleCondition++` link:/blob/v1.0//Users/giorgilagidze/Desktop/work/multibody/staged-proposal-processor-plugin/src/utils/SPPRuleCondition.sol[{github-icon},role=heading-link]

This contract must be deployed either with clonable or `new` keyword.

[.contract-index]
.Functions
--
* {xref-SPPRuleCondition-constructor-address-struct-RuledCondition-Rule---}[`++constructor(_dao, _rules)++`]
* {xref-SPPRuleCondition-initialize-address-struct-RuledCondition-Rule---}[`++initialize(_dao, _rules)++`]
* {xref-SPPRuleCondition-isGranted-address-address-bytes32-bytes-}[`++isGranted(_where, _who, _permissionId, )++`]
* {xref-SPPRuleCondition-_updateRules-struct-RuledCondition-Rule---}[`++_updateRules(_rules)++`]
* {xref-SPPRuleCondition-updateRules-struct-RuledCondition-Rule---}[`++updateRules(_rules)++`]
* {xref-SPPRuleCondition-UPDATE_RULES_PERMISSION_ID-bytes32}[`++UPDATE_RULES_PERMISSION_ID()++`]

[.contract-subindex-inherited]
.RuledCondition
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/permission/condition/extensions/RuledCondition.sol[supportsInterface]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/permission/condition/extensions/RuledCondition.sol[getRules]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/permission/condition/extensions/RuledCondition.sol[_evalRule]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/permission/condition/extensions/RuledCondition.sol[_evalLogic]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/permission/condition/extensions/RuledCondition.sol[_checkCondition]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/permission/condition/extensions/RuledCondition.sol[_compare]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/permission/condition/extensions/RuledCondition.sol[encodeIfElse]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/permission/condition/extensions/RuledCondition.sol[encodeLogicalOperator]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/permission/condition/extensions/RuledCondition.sol[decodeRuleValue]

[.contract-subindex-inherited]
.PermissionConditionUpgradeable

[.contract-subindex-inherited]
.ProtocolVersion
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/utils/versioning/ProtocolVersion.sol[protocolVersion]

[.contract-subindex-inherited]
.IProtocolVersion

[.contract-subindex-inherited]
.IPermissionCondition

[.contract-subindex-inherited]
.ERC165Upgradeable

[.contract-subindex-inherited]
.IERC165Upgradeable

[.contract-subindex-inherited]
.DaoAuthorizableUpgradeable
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/permission/auth/DaoAuthorizableUpgradeable.sol[__DaoAuthorizableUpgradeable_init]
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/permission/auth/DaoAuthorizableUpgradeable.sol[dao]

[.contract-subindex-inherited]
.ContextUpgradeable

[.contract-subindex-inherited]
.Initializable

--

[.contract-index]
.Events
--

[.contract-subindex-inherited]
.RuledCondition
* link:https://github.com/aragon/osx-commons/tree/main/contracts/src/permission/condition/extensions/RuledCondition.sol[RulesUpdated]

[.contract-subindex-inherited]
.PermissionConditionUpgradeable

[.contract-subindex-inherited]
.ProtocolVersion

[.contract-subindex-inherited]
.IProtocolVersion

[.contract-subindex-inherited]
.IPermissionCondition

[.contract-subindex-inherited]
.ERC165Upgradeable

[.contract-subindex-inherited]
.IERC165Upgradeable

[.contract-subindex-inherited]
.DaoAuthorizableUpgradeable

[.contract-subindex-inherited]
.ContextUpgradeable

[.contract-subindex-inherited]
.Initializable

--

[.contract-item]
[[SPPRuleCondition-constructor-address-struct-RuledCondition-Rule---]]
==== `[.contract-item-name]#++constructor++#++(address _dao, struct RuledCondition.Rule[] _rules)++` [.item-kind]#public#

Disables the initializers on the implementation contract to prevent it from being left uninitialized.

[.contract-item]
[[SPPRuleCondition-initialize-address-struct-RuledCondition-Rule---]]
==== `[.contract-item-name]#++initialize++#++(address _dao, struct RuledCondition.Rule[] _rules)++` [.item-kind]#public#

Initializes the component.

[.contract-item]
[[SPPRuleCondition-isGranted-address-address-bytes32-bytes-]]
==== `[.contract-item-name]#++isGranted++#++(address _where, address _who, bytes32 _permissionId, bytes) → bool isPermitted++` [.item-kind]#external#

Checks if a call is permitted.

[.contract-item]
[[SPPRuleCondition-_updateRules-struct-RuledCondition-Rule---]]
==== `[.contract-item-name]#++_updateRules++#++(struct RuledCondition.Rule[] _rules)++` [.item-kind]#internal#

Internal function that updates the rules.

[.contract-item]
[[SPPRuleCondition-updateRules-struct-RuledCondition-Rule---]]
==== `[.contract-item-name]#++updateRules++#++(struct RuledCondition.Rule[] _rules)++` [.item-kind]#public#

Updates the rules that will be used as a check upon proposal creation on &#x60;StagedProposalProcessor&#x60;.

[.contract-item]
[[SPPRuleCondition-UPDATE_RULES_PERMISSION_ID-bytes32]]
==== `[.contract-item-name]#++UPDATE_RULES_PERMISSION_ID++#++() → bytes32++` [.item-kind]#public#

The ID of the permission required to call the &#x60;updateRules&#x60; function.

